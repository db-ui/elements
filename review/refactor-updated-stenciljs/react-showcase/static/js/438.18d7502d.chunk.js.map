{"version":3,"file":"static/js/438.18d7502d.chunk.js","mappings":"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","sources":["../../../packages/db-ui-elements-stencil/dist/esm/src/components/db-table/db-table.tsx","../../../packages/db-ui-elements-stencil/dist/esm/src/components/db-table/db-table.scss?tag=db-table&encapsulation=scoped"],"sourcesContent":["import { Component, h, Prop, Watch } from '@stencil/core';\nimport { TableDataType } from './type';\n\n@Component({\n  tag: 'db-table',\n  styleUrl: 'db-table.scss',\n  scoped: true\n})\nexport class DbTable {\n  private errorTableData: TableDataType = {\n    caption: 'No valid table data provided',\n    headers: ['Error parsing data'],\n    columns: {\n      'Error parsing data': ['please check data']\n    },\n    rows: [\n      {\n        error: [undefined, 'Error parsing data']\n      }\n    ]\n  };\n\n  /**\n   * The tabledata prop receives a stringified object of the type\n   * \"TableDataType\" and sets the initial value of the table.\n   * It can also be set as a property from the outside via JavaScript\n   */\n  @Prop({ reflect: false }) tabledata: string | object;\n\n  /**\n   * Either holds the value of the validated tabledata prop or \"errorTableData\"\n   */\n  private validTableData: TableDataType;\n\n  /**\n   * Validates and sets the value of validTableData upon modification of the\n   * tabledata attribute/property.\n   */\n  @Watch('tabledata')\n  validateTableData(newTableData: TableDataType) {\n    const { caption, headers, columns, rows } = newTableData;\n    const columnKeys =\n      typeof columns === 'object' && columns !== null\n        ? Object.keys(columns)\n        : [];\n    const isHeader = headers?.length > 0;\n    const isRowAndColumn = Array.isArray(rows) && columnKeys.length > 0;\n\n    if (!caption || isRowAndColumn || !isHeader) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Table data invalid: check caption or headers/columns mismatch'\n      );\n      this.validTableData = this.errorTableData;\n      return;\n    }\n    this.validTableData = newTableData;\n  }\n\n  /**\n   * Validate incoming table data props once on creation because they do not fire @watch\n   */\n  componentWillLoad() {\n    this.validateTableData(this.parseTabularData(this.tabledata));\n  }\n\n  /**\n   * The align prop sets the data-align attribute on the thead\n   * element of the rendered table. Valid values are \"left\" (default), \"center\",\n   * \"bottom\"\n   */\n  @Prop({ reflect: true }) align?: string = '';\n\n  /**\n   * The verticalalign prop sets the data-vertical-align attribute on\n   * the thead element of the rendered table. Valid values are \"top\"\n   * (default), \"middle\", \"bottom\"\n   */\n  @Prop({ reflect: true }) verticalalign?: string = '';\n\n  /**\n   * The bodyalign prop sets the data-align attribute on\n   * the tbody element of the rendered table. Valid values are \"left\"\n   * (default), \"center\", \"bottom\"\n   */\n  @Prop({ reflect: true }) bodyalign?: string = '';\n\n  /**\n   * The bodyverticalalign prop sets the data-vertical-align attribute\n   * on the tbody element of the rendered table. Valid values are \"top\"\n   * (default), \"middle\", \"bottom\"\n   */\n  @Prop({ reflect: true }) bodyverticalalign?: string = '';\n\n  /**\n   * The border prop sets the data-border attribute\n   * on the table element of the rendered table. Valid values are \"around\",\n   * \"horizontal\"\n   */\n  @Prop({ reflect: true }) border?: string = '';\n\n  /**\n   * The density prop sets the data-density attribute\n   * on the table element of the rendered table. Valid values are \"small\",\n   * \"regular\", \"large\"\n   */\n  @Prop({ reflect: true }) density?: string = '';\n\n  /**\n   * The fontsize prop sets the the font size of the style attribute\n   * on the table element of the rendered table.\n   */\n  @Prop({ reflect: true }) fontsize?: string = '1rem';\n\n  /**\n   * The stripes prop sets the the zebra stripes coloring of the rendered table.\n   */\n  @Prop({ reflect: true }) stripes?: string = '';\n\n  /**\n   * The sticky prop sets the table header stickyness of the rendered table.\n   */\n  @Prop({ reflect: true }) sticky?: string = '';\n\n  /**\n   * Without framework (Angular, React, Vue) we will need to pass a tabledata as\n   * string. parseTabularData() will return a fallback so the renderd table can\n   * inform the user about a mismatching value if the string cannot be parsed.\n   */\n  private parseTabularData(item: string | object) {\n    try {\n      if (typeof item === 'string') {\n        return JSON.parse(item);\n      }\n      if (typeof item === 'object') return item;\n    } catch (error) {\n      return this.errorTableData;\n    }\n  }\n\n  /**\n   * We need to know which column of the table is the longest so we can fill\n   * shorter columns with empty cells\n   */\n  private calcColumnLength(\n    tableHeaders: TableDataType['headers'],\n    tableColumns: TableDataType['columns']\n  ) {\n    return tableColumns === undefined\n      ? []\n      : tableHeaders.reduce((prevCol, currentCol) => {\n          return prevCol < tableColumns[currentCol].length\n            ? tableColumns[currentCol].length\n            : prevCol;\n        }, 0);\n  }\n\n  private isRowData(tableData) {\n    return !!Array.isArray(tableData.rows);\n  }\n\n  render() {\n    const isRowData = this.isRowData(this.validTableData);\n    const { caption, headers, columns, rows, rowTitles, rowTitle } =\n      this.validTableData;\n    const maxColumnLength = this.calcColumnLength(headers, columns);\n    const columnIter = [...Array(maxColumnLength).keys()];\n    const showRowTitles = rowTitles?.length > 0;\n\n    return (\n      <div>\n        <table\n          class=\"cmp-table\"\n          data-border={this.border ? this.border : null}\n          data-density={this.density ? this.density : null}\n          style={{ '--table---fontSize': this.fontsize }}\n          data-rows={this.stripes ? this.stripes : null}\n          data-sticky={this.sticky ? this.sticky : null}\n        >\n          <caption>{caption}</caption>\n          <thead\n            data-align={this.align ? this.align : null}\n            data-vertical-align={this.verticalalign ? this.verticalalign : null}\n          >\n            <tr>\n              {rowTitle && <th scope=\"col\">{rowTitle}</th>}\n              {headers.map((head, index) => (\n                <th key={`table-header-${index}`} scope=\"col\">\n                  {head}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody\n            data-align={this.bodyalign ? this.bodyalign : null}\n            data-vertical-align={\n              this.bodyverticalalign ? this.bodyverticalalign : null\n            }\n          >\n            {isRowData &&\n              rows.map((obj, idx) => {\n                return (\n                  <tr key={`row-${idx}`} class={`row-${idx}`}>\n                    {showRowTitles && <th scope=\"row\">{rowTitles[idx]}</th>}\n                    {headers.map((table, index) => {\n                      // If no row is provided, return empty cell [null, null]\n                      const [icon, cellText] = obj[table] ?? [null, null];\n                      return (\n                        <td key={`cell-${idx}-${index}`}>\n                          {icon && <db-icon icon={icon} />}\n                          {cellText}\n                        </td>\n                      );\n                    })}\n                  </tr>\n                );\n              })}\n            {!isRowData &&\n              columnIter.map((num, idx) => (\n                <tr key={`row-${idx}`} class={`row-${num}`}>\n                  {showRowTitles && <th scope=\"row\">{rowTitles[idx]}</th>}\n                  {headers.map((table, index) => {\n                    const [icon, cellText] = columns[table][idx] ?? [\n                      null,\n                      null\n                    ];\n                    return (\n                      <td key={`cell-${idx}-${index}`}>\n                        {icon && <db-icon icon={icon} />}\n                        {cellText}\n                      </td>\n                    );\n                  })}\n                </tr>\n              ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","@import '../general';\n@import 'table';\n"],"names":["DbTable","errorTableData","caption","headers","columns","rows","error","undefined","newTableData","columnKeys","Object","keys","isHeader","length","isRowAndColumn","Array","isArray","console","this","validTableData","validateTableData","parseTabularData","tabledata","item","JSON","parse","tableHeaders","tableColumns","reduce","prevCol","currentCol","key","value","tableData","isRowData","rowTitles","rowTitle","maxColumnLength","calcColumnLength","columnIter","showRowTitles","h","class","border","density","style","fontsize","stripes","sticky","align","verticalalign","scope","map","head","index","bodyalign","bodyverticalalign","obj","idx","table","_ref2","icon","cellText","num","_ref4","get"],"sourceRoot":""}