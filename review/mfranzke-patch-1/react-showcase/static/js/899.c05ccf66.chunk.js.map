{"version":3,"file":"static/js/899.c05ccf66.chunk.js","mappings":"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","sources":["../../../packages/db-ui-elements-stencil/dist/esm/github-version-switcher.entry.js"],"sourcesContent":["import { r as registerInstance, h, H as Host } from './index-60c9fafb.js';\n\nconst githubVersionSwitcherCss = \".gh-version-switcher select{max-width:196px}\";\n\nconst GithubVersionSwitcher = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this._defaultBranch = 'latest';\n    this.groups = [\n      { name: 'Versions', branches: [] },\n      { name: 'Features', branches: [] },\n      { name: 'Bugfixes', branches: [] },\n      { name: 'Other', branches: [] }\n    ];\n    this.currentBranch = this._defaultBranch;\n    this.stripString = (value) => {\n      return value.replace(/[^a-zA-Z0-9-]/g, '');\n    };\n    this.fetchFromGitHubApi = async (url) => {\n      const response = await fetch(url);\n      return await response.json();\n    };\n    this.setCurrentBranch = (branchNames) => {\n      const currentUrl = window.location.href;\n      const foundBranch = branchNames.find((branch) => currentUrl.includes(branch));\n      if (foundBranch) {\n        this.currentBranch = foundBranch;\n      }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.setBranches = (data) => {\n      const branchNames = data\n        .map((branch) => branch.name)\n        .filter((branch) => branch !== 'gh-pages' && !branch.includes('dependabot'));\n      branchNames.forEach((branch) => {\n        if (branch.startsWith('feat') || branch.startsWith('feature')) {\n          this.groups[1].branches.push(branch);\n        }\n        else if (branch.startsWith('fix') || branch.startsWith('bugfix')) {\n          this.groups[2].branches.push(branch);\n        }\n        else {\n          this.groups[3].branches.push(branch);\n        }\n      });\n      this.setCurrentBranch(branchNames);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.setTags = (data) => {\n      const tagNames = data.map((tag) => tag.name);\n      tagNames.forEach((tag) => {\n        this.groups[0].branches.push(tag);\n      });\n      this.setCurrentBranch(tagNames);\n    };\n  }\n  get defaultBranch() {\n    return this._defaultBranch;\n  }\n  set defaultBranch(value) {\n    this._defaultBranch = value;\n  }\n  async componentWillLoad() {\n    const cOwner = this.stripString(this.owner);\n    this.cleanOwner = cOwner;\n    const cRepo = this.stripString(this.repo);\n    this.cleanRepo = cRepo;\n    const branchesData = await this.fetchFromGitHubApi(`https://api.github.com/repos/${cOwner}/${cRepo}/branches`);\n    this.setBranches(branchesData);\n    const tagsData = await this.fetchFromGitHubApi(`https://api.github.com/repos/${cOwner}/${cRepo}/tags`);\n    this.setTags(tagsData);\n  }\n  // eslint-disable-next-line @stencil/own-methods-must-be-private\n  handleChange(branch, localOwner, localRepo) {\n    if (localOwner && localRepo) {\n      const currentUrl = top.location.href;\n      const urlPaths = currentUrl.split('?');\n      const lastPath = urlPaths[urlPaths.length - 1];\n      const isTag = branch.split('.').length === 3 && branch.startsWith('v');\n      top.location = `https://${localOwner}.github.io/${localRepo}${this._defaultBranch === branch\n        ? ''\n        : `${isTag ? '/version' : '/review'}/${branch}`}/?${lastPath}`;\n    }\n  }\n  render() {\n    var _a;\n    return (h(Host, null, ((_a = this.groups) === null || _a === void 0 ? void 0 : _a.length) > 0 && (h(\"db-select\", { class: \"gh-version-switcher\", label: \"Version\", name: \"Theme\", onDbChange: (event) => this.handleChange(event.target.value, this.cleanOwner, this.cleanRepo) }, h(\"option\", { value: this._defaultBranch, selected: this.currentBranch === this._defaultBranch }, this._defaultBranch), this.groups\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      .filter((group) => { var _a; return ((_a = group.branches) === null || _a === void 0 ? void 0 : _a.length) > 0; })\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      .map((group) => (h(\"optgroup\", { key: group.name, label: group.name }, group.branches.map((branch, index) => (h(\"option\", { key: `${group.name}-${branch}-${index}`, value: branch, selected: this.currentBranch === branch }, branch))))))))));\n  }\n};\nGithubVersionSwitcher.style = githubVersionSwitcherCss;\n\nexport { GithubVersionSwitcher as github_version_switcher };\n"],"names":["GithubVersionSwitcher","hostRef","registerInstance","this","_defaultBranch","groups","name","branches","currentBranch","stripString","value","replace","fetchFromGitHubApi","url","fetch","response","json","setCurrentBranch","branchNames","currentUrl","window","location","href","foundBranch","find","branch","includes","setBranches","data","map","filter","forEach","startsWith","push","setTags","tagNames","tag","cOwner","owner","cleanOwner","cRepo","repo","cleanRepo","branchesData","tagsData","localOwner","localRepo","urlPaths","top","split","lastPath","length","isTag","_a","h","Host","class","label","onDbChange","event","handleChange","target","selected","group","key","index","style"],"sourceRoot":""}