name: Print Cypress Summary

on:
  workflow_call:

jobs:
  print-cypress-summary:
    name: Print Cypress Summary
    runs-on: ubuntu-latest
    steps:
      - name: ‚¨á Checkout repo
        uses: actions/checkout@v3

      - name: ‚¨á Download summary for areas
        uses: actions/download-artifact@v3
        with:
          name: areas-summary
          path: areas-summary

      - name: ‚¨á Download summary for components
        uses: actions/download-artifact@v3
        with:
          name: components-summary
          path: components-summary

      - name: ‚¨á Download summary for elements
        uses: actions/download-artifact@v3
        with:
          name: elements-summary
          path: elements-summary

      - name: ‚¨á Download summary for showcases
        uses: actions/download-artifact@v3
        with:
          name: showcases-summary
          path: showcases-summary

      - name: üñ®Ô∏è Print cypress summary
        run: |
          echo "<h2>Cypress Results</h2>" > $GITHUB_STEP_SUMMARY

          CONTAINERS=('areas' 'components' 'elements' 'showcases')
          for container in "${CONTAINERS[@]}"
          do
            fileName=${container}-summary
            sed "s/Cypress Results/$fileName/g" ${fileName}
            sed "s/h2/h3/g" ${fileName}
            cat "${fileName}" >> $GITHUB_STEP_SUMMARY
          done

          echo $GITHUB_STEP_SUMMARY
